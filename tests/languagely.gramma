;; --- [ CORE PROGRAM STRUCTURE ] ---
<program>         ::= { <global_item> }

<global_item>     ::= <struct_def>
                    | <function_def>
                    | <var_def>

;; --- [ DATA TYPES & IDENTIFIERS ] ---
<datatype>        ::= "i64" | "char" | "void" | IDENTIFIER
<ptr_opt>         ::= { "*" }

;; --- [ STRUCT DEFINITION ] ---
<struct_def>      ::= "struct" IDENTIFIER "{" { <struct_member> } "}"
<struct_member>   ::= IDENTIFIER <datatype> ";"

;; --- [ FUNCTION DEFINITION ] ---
<function_def>    ::= "func" <func_name> "(" <param_list> ")" "->" <datatype> <block>
<func_name>       ::= "main" | IDENTIFIER
<param_list>      ::= [ <parameter> { "," <parameter> } ]
<parameter>       ::= IDENTIFIER <datatype>

;; --- [ STATEMENTS & BLOCKS ] ---
<block>           ::= "{" { <statement> } "}"
<statement>       ::= <var_def>
                    | <assignment>
                    | <function_call> ";"
                    | "return" [ <expression> ] ";"

;; --- [ VARIABLE DEFINITIONS ] ---
;; Matches: var x int; OR var x = y; OR var x = int ** 5;
<var_def>         ::= "var" IDENTIFIER <var_tail> ";"
<var_tail>        ::= <datatype> 
                    | "=" <id_or_lit>
                    | "=" <datatype> <ptr_opt> <literal>

;; --- [ EXPRESSIONS & ACCESS ] ---
<assignment>      ::= <access_path> "=" <expression> ";"
<access_path>     ::= IDENTIFIER { "." | "->" IDENTIFIER }
<expression>      ::= <id_or_lit> | <function_call>
<id_or_lit>       ::= <access_path> | <literal>
<function_call>   ::= IDENTIFIER "(" [ <arg_list> ] ")"
<arg_list>        ::= <expression> { "," <expression> }
<literal>         ::= NUMBER | STRING_LITERAL
